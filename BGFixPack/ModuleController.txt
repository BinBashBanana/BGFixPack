Documentation Concerning ModuleController.tpa

The file ModuleController.tpa is designed to allow the end user to control which patches are installed by the BGFixPack should it be necessary to not install certain patches due to: incompatibility with a desired mod; testing specific patches to determine incompatibilty with another mod; a general dislike for a specific patch.

To adjust open ModuleController.tpa located in the main BGFixPack directory and comment out the INCLUDE statements for the patch in question.
Example:
        Default setting:
                INCLUDE ~bgfixpack\modules\ISSUES-OublekEmeraldBountyExploit.tph~
                //INCLUDE ~bgfixpack\modules\ISSUES-OublekEmeraldBountyExploitTWEAK.tph~
        Modified setting:
                //INCLUDE ~bgfixpack\modules\ISSUES-OublekEmeraldBountyExploit.tph~
                INCLUDE ~bgfixpack\modules\ISSUES-OublekEmeraldBountyExploitTWEAK.tph~

List of User Controlled Patches and what they do:

For all versions of BG & BG:ToTSC
CUTSCENES-GorionCutscene.tph
this patch allows Gorion to be smart. He only casts healing if the player is in need of it.
modifies: gorion.dlg  adds new file: abgfc1c1.bcs

CUTSCENES-GorionSarevokVoiceOverlapFix.tph
this patch gives a slight pause between two voice files that were overlapping
modifies: ch1cut03.bcs

MUSIC-MusicFixesAllAndSagaOnly.tph
adds corrected music files
modifies: bd1.mus, bl1.mus
Saga only modifies: bc2.mus, bd1.mus, bd2.mus, bf2.mus, bl1.mus, bl2.mus, bp2.mus, cday2.mus, chants.mus, chapter.mus, dream.mus, dung2.mus, dung3.mus, tav2.mus, tav4.mus, tday2.mus

SCRIPTS-ScriptingNameMatching.tph
corrects the scripting variable names used in scripts to match those found on the associated creature files
modifies: AR0612.BCS, AR0613.BCS, AR0614.BCS, AR0616.BCS, AR0800.BCS, AR1300.BCS

2DA-Corrections.tph
modified to reflect the manual or 2e rules as necessary.
modifies: lorebon.2da, skillrng.2da, wspecial.2da, xplevel.2da, alignmnt.2da

AREA-CrashFixes.tph
patches that solve specific game crashes
modifies: AR3300.ARE, ar0717.are

AREA-MissingAmbients.tph
the patch replaces missing ambients with existing ambient sounds
modifies: ar0100.are, ar0200.are, ar0300.are, ar0400.are, ar0600.are, ar0621.are, ar0800.are, ar1100.are, ar1200.are, ar1400.are, ar1900.are, ar3300.are, ar4200.are, ar4300.are, ar4700.are, ar5400.are, ar5500.are

AREA-RealignContainerHighlights.tph
Per dudley realigns the highlights of various containers
modifies: ar0159.are, ar0101.are, ar0105.are, ar0004.are, ar0018.are, ar0709.are, ar0715.are

AREA-ModifyFacingDirection.tph
this patch scans every area file in game and modifies each entrance as necessary to an appropriate facing direction upon entering the area.

AREA-FixDetectedAndTraplessTraps.tph
patch #1 removes the trapped status from containers & doors which do not have a script assigned to them. 
modifies: AR0153.ARE, AR1116.ARE, AR1211.ARE, AR2619.ARE, AR3341.ARE, AR3336.ARE, AR0512.ARE, AR0514.ARE, AR1001.ARE
patch #2 makes trapped containers which are pre-detected to become undetected.
modifies: ar0500.are, ar0511.are, ar0512.are, ar0513.are, ar0514.are, ar1501.are, ar1502.are, ar1503.are, ar1504.are, ar3336.are

DIALOG-BasicCorrections.tph
basically corrects various incorrectly typed code within multiple dialog files. Only one case utilizes additional coding and that is on reven3.dlg
modifies: orduli.dlg, tremai.dlg, marl.dlg, nobw8.dlg, taerom.dlg, reven3.dlg, nobl9.dlg, SAREVO.dlg, ithtyl.dlg, cythan.dlg, fergus.dlg, flam7.dlg, abela.dlg, brevli.dlg, deltan.dlg, deltan2.dlg, narlen.dlg, quinn.dlg, tersus.dlg, alatos.dlg, beland.dlg, bjahei.dlg, garric.dlg, jaheij.dlg, melica.dlg, minsc.dlg, sharte.dlg, therel.dlg, viconi.dlg, volo.dlg, amnise.dlg, bandic.dlg, cattac.dlg, delorn.dlg, delthy.dlg, doomsay.dlg, drunk.dlg, dynahe.dlg, edwinj.dlg, eldotp.dlg, emerso.dlg, friend.dlg, iron12.dlg, jared.dlg, lahl.dlg, minern.dlg, MTOB6.dlg, nobl10.dlg, pheirk.dlg, pheirkas.dlg, raiken.dlg, read4.dlg, safana.dlg, shoal.dlg, sonner.dlg, tamoko.dlg, teven.dlg, test2.dlg, rashad.dlg, messed.dlg, nobl5.dlg

CREATURES-BasicCorrections.tph
patch #1 assigns death variables to creatures in need of one
modifies: sugar.cre, ivanne.cre, sorrel.cre, ADDY.cre, BRENNA.cre, CAEDMO.cre, ELMIN3.cre, JONAVI.cre, KAELLA.cre, KARAN1.cre, PARDA1.cre, SLAVFREE.cre, VOLO.cre, ZOMBIEB.cre, HAFFG2.cre, HALFG2.cre, MTOB4.cre, MTOB5.cre
patch #2 corrects mis-typed item names of items assigned to creatures
modifies: dead2.cre, deadfuck.cre, flamang.cre, flampun.cre, flampun2.cre, flamsco.cre, flamwiz.cre, jamie.cre, kent.cre, lothan.cre, aasim.cre, amaran.cre, sakul.cre, drelik.cre, SKELDED.CRE, CULTASS.CRE
patch #3 moves items that were placed into the incorrect equipping slot into the correct equipment slot
modifies: RINNIE.CRE, ZHURLO.CRE
patch #4 corrects incorrect script reference
modifies: BIRD_INE.CRE, BIRD_INN.CRE, BIRD_INS.CRE, BIRD_INW.CRE
patch #5 asigns correct genders (stolen from UB)
males modifies: ~IKE.CRE~ ~JONDAL.CRE~ ~ANDRIS.CRE~ ~BARESH2.CRE~ ~BARWLF.CRE~ ~BEARPO3.CRE~ ~BEYN.CRE~ ~CUCHOL.CRE~ ~CULT2.CRE~
~DELSVIR.CRE~ ~DOOMDUR.CRE~ ~DRADEE.CRE~ ~DRADEE2.CRE~ ~GARAN.CRE~ ~KING.CRE~ ~LEAGGU1.CRE~ ~LEAGGU4.CRE~ ~LEAGGU5.CRE~
~LEAGGU6.CRE~ ~LEAGGU7.CRE~ ~MARCEL.CRE~ ~MTOWUB_A.CRE~ ~MTOWUB_B.CRE~ ~MTOWUB_C.CRE~ ~MTOWUB_D.CRE~ ~MTOWUB_E.CRE~
~MTOWUBSC.CRE~ ~MTOWUBSN.CRE~ ~MTOWUBST.CRE~ ~MTOWUBX.CRE~ ~TARNOR.CRE~ ~ULF.CRE~
females modifies: ~JAHEIR4.CRE~ ~JAHEIR6.CRE~ ~arkush.cre~ ~desret.cre~ ~diana.cre~ ~joia.cre~ ~kirian.cre~
~knight2.cre~ ~knight5.cre~ ~sendai.cre~ ~servwg.cre~ ~serwen.cre~ ~sleepfh.cre~ ~tamah.cre~ ~vayya.cre~ ~voleta.cre~
~wiven.cre~ ~wudei.cre~ ~CLAIRD.CRE~ ~CULTT3.CRE~ ~CULTT4.CRE~ ~DAESE.CRE~ ~DELAIN2.CRE~ ~FTOWUB_A.CRE~
~FTOWUB_B.CRE~ ~FTOWUB_E.CRE~ ~FTOWUBSC.CRE~ ~FTOWUBSN.CRE~ ~FTOWUBX.CRE~ ~ISLSIR.CRE~ ~JAHEIR4.CRE~
~JAHEIR6.CRE~ ~LEAGGU2.CRE~ ~LEAGGU3.CRE~ ~LOVEM.CRE~ ~MARALE2.CRE~ ~PHEOARCH.CRE~ ~TRACEA.CRE~
neither or neutral modifies: ~APPAR.CRE~ ~CRYPTCRA.CRE~ ~GHASTD.CRE~ ~GRAEL.CRE~ ~HACK.CRE~ ~PLYOGRE.CRE~ ~SKELET.CRE~ ~SPIDPHAS.CRE~ ~STALKE.CRE~
patch #6 stops farmers from turning hostile if nearby bandits get too close
modifies: ~FARMBR.CRE~ ~GERDE.CRE~ ~JEBADO.CRE~ ~SONNER.CRE~ ~TELMEN.CRE~
patch #7 realigns the allegiance of the inforcer called by Alora correct penalties apply for killing
modifies: ~FLAM.CRE~
patch #8 skeleton missing the correct immunites has them applied
modifies: ~SKELETS.CRE~
patch #9 Corrects zombie damage and dying sounds that were skeleton sounds
modifies: ~ZOMBIE.CRE~ ~ZOMBIE_A.CRE~ ~ZOMBIEB.CRE~

STORES-GullykinStoreFix.tph
corrects the oversight where the store in Gullykin shared content with the store in Nashkell
modifies: alvan.dlg creates: tem4003.sto

SPELLS-MagicMissileDamageFix.tph
corrects the damage done by the magic missle spells
modifies: spwi003.spl, spw112.spl

ITEMS-BasicCorrections.tph
patch #1 adjusts weights, prices, name changes (not dependent upon GTU), & icon references
modifies: ~book27.itm~ ~book39.itm~ ~ax1h04.itm~ ~sw2h03.itm~ ~scrl05.itm~ ~boot06.itm~ ~clck08.itm~ ~book68~ ~helm06~
patch #2 corrects referenced item type should be arrow rather than misc/book
modifies: ~arow13.itm~
patch #3 corrects target of the raise dead scroll (unused in unmodified game - UB needs this corrected)
modifies: ~scrl63.itm~
patch #4 allows bards to use the Gauntlets of Ogre Power
modifies: ~brac06.itm~
patch #5 remove strength requirement from arrows, the bow should require strength not the arrow
modifies: ~arow05.itm~ ~arow12.itm~ ~arow14.itm~
patch #6 add missing equipping effects to a number of files
modifies: ~ring23.itm~ ~sw2h06.itm~  ~clck11.itm~
patch #7 spear attack animation corrected
modifies: ~sper02.itm~ ~sper03.itm~
patch #8 corrects the use location of some magic items
modifies: ~magiweb.itm~ ~scrl3g.itm~ ~scrlzy.itm~ ~scrlzz.itm~
patch #9 corrects icon reference name
modifies: ~arow1a.itm~
patch #10 modifies the potion to act more like the spell
modifies: ~POTN45.ITM~
patch #11 adjusts timing to match description
modifies: potn36.itm
patch #12 removes THAC0 & damage bonuses not mentioned in the item's description
modifies: arow08.itm
patch #13 corrects dispellability of timing color on global/equipped effects
modifies: ~ax1h04.itm~ ~ax1h05.itm~ ~ax1h06.itm~ ~blun01.itm~ ~blun04.itm~ ~blun06.itm~ ~bow02.itm~ ~bow05.itm~ ~bow06.itm~ ~bow08.itm~ ~bow09.itm~ ~bow99.itm~ ~bownon.itm~ ~cattac1.itm~ ~dagg04.itm~ ~dagg05.itm~ ~daggshit.itm~ ~halb01.itm~ ~halbrd01.itm~ ~hamm01.itm~ ~helm03.itm~ ~helm04.itm~ ~helm07.itm~ ~iax1h01.itm~ ~iblun04.itm~ ~ibow03.itm~ ~ihamm01.itm~ ~mage02.itm~ ~slimed2.itm~
~sw1h08.itm~ ~sw1h14.itm~ ~sw1h99.itm~ ~sw2h01.itm~ ~sw2h01b.itm~ ~sw2h02.itm~ ~sw2h05.itm~ ~xbow01.itm~ ~xbow03.itm~
patch #14 removes thieving skills from a plate of armor
modifies: plat05.itm

UNLOCKED-MinorExistingContent.tph
patch #1 opens additional dialog by Fuller who will when asked inform player of the location of Hull's sword
modifies: fuller.dlg, hull.dlg
patch #2 opens additional banter that player can partake in with the nobles found in the side room on the first floor of the Candlekeep Inn.
modifies: nobw4.dlg, nobl4.dlg

ISSUES-LothanderAndMarekOtherSolutions.tph
Corrects several issues regarding both Lothander and Marek as well as providing other hinted at means of solving the dilema of the party being poisoned.
patch #1 Lothander has an instance where he is looped thru creation and removal due to some incorrectly coded triggers and actions.
modifies: lothan.dlg
patch #2 A number of individuals reported problems with continuing the quest, typically it returns to the player having forgotten to talk to Lothander outside of the Diviner's Tent. His dialog suggests that he should initiate the conversation, this has been implemented.
modifies: ar0700.bcs   adds: abgfinit.bcs
patch #3 Marek when charmed states that he is giving the player the antidote, but never did.  this has been implemented.
modifies: marek.dlg
patch #4 The antidote could be pickpocketed from Marek. Rather than removing the ability, the quest can now be solved in this manner.
modifies: ar0115.bcs

ISSUES-GorpelAndGretekSolutions.tph
Under certain situations, the player could experience multiple instances of Gretek and friends being spawned by talking with Gorpel Hind. Also they would cause all other npcs in the inn to go hostile. There were some reports of Gretek's friends not going hostile either. These were hopefully well addressed.
modifies: gorpel.dlg, gretek.cre, pargus.cre, wilf.cre, nader.cre, arlin.cre, catura.cre    adds: abgfight.bcs

ISSUES-YeslickKickoutLoopFix.tph
Solves an issue where Yeslick would go thru a loop of joining and leaving the party under certain circumstances.
modifies: yeslick.bcs yeslij.dlg

ISSUES-BoyBodyAndJalanthaMistmyr.tph
Addresses the ability to obtain the dead boy's body multiple times and removes the capability of pick pocketing the body (surely one would notice THAT being pulled from their pocket).
modifies: ar0609.are, ar0609.bcs (or existing area script), jalant.cre, tenya2.dlg, tenya2.cre

ISSUES-AldethBetrayalFixByIdobek.tph
Idobek's solution to the Aldeth Betrayal issue, based on Baldurdash & Dudley
modifies: dabron.bcs, aldeth.cre, ar0128.bcs, ar1100.bcs, aldeth.dlg, flamal.baf

ISSUES-RamazithsMultiplePickpocketExploit.tph
Addresses the issue where Ramazith could be pickpocketed multiple times for the same items. Care has been taken to allow the ability to pick his pockets but only once, even tho his creature file is created in three different areas.  Also touches up his dialog file where a state has a response which returns back to the same state.
modifies: ramazi.dlg, ramazi.cre  adds: abgframi.bcs

ISSUES-MonksSpeakOfDeadOnlyWhenDead.tph
Addresses an issue with the monks Karan and Parda which occurs should the player exit either house in Candlekeep without killing either Carbos or Shank. The monks won't spawn and talk about the deaths.
modifies: carbos.cre, shank.cre, ar2600.bcs

ISSUES-BetterRatQuestCount.tph
Addresses a random issue where the rats for Reevor's quest aren't properly counted even tho all five have been killed.
modifies: rat2.cre, ar2606.bcs

ISSUES-BanditScalpPickPocketProblems.tph
Addresses the oversight of the bandit scalps being able to picked from pockets.  Scalp is removed and is given when the creature turns hostile. Failing that there is a chance depending upon if the script catches their death that the scalps will be created when they die if they don't already have one.
modifies: teynga.dlg, nevill.dlg, knott.dlg, arghai.dlg, canto.dlg, ~ARGHAI.CRE~ ~TEYNGA.CRE~ ~ZEKAR.CRE~ ~JEMBY.CRE~ ~NEVILL.CRE~ ~KNOTT.CRE~ ~CANTO.CRE~ ~BILLY.CRE~ ~DRIBBE.CRE~ ~BANDCAP.CRE~ ~BANDCR.CRE~ ~BANDIC.CRE~ ~BANDIT.CRE~ ~BANDIT2.CRE~ ~BANDIT3.CRE~ ~BANDITA.CRE~ ~BANDITC.CRE~ ~BANDITCY.CRE~ ~HOBGOBC.CRE~ ~RAEMON.CRE~ ~REPMAN.CRE~ ~THUG.CRE~ ~TRALIT.CRE~ argha.bcs  adds: abgfbdsh.bcs

ISSUES-OublekEmeraldBountyExploit.tph
Addresses to an extent the exploit of turning in one emerald and then the second for twice the proper reward.  Due to coding issues, in BG sans ToTSC you can still turn in only one emerald but you are prevented from turning in the second for additional reward. In ToTSC, both emeralds must be present or you won't get the option to claim the reward.
modifies: oublek.dlg

ISSUES-OublekEmeraldBountyExploitTWEAK.tph
An optional patch due to it's highly tweakish nature yet a true solution to the exploit issues as well as adding in additional methods of completing the quest and making sense of the normal method. Just a hint, if you can't find the new emeralds check the statue.
modifies: ar5400.are, prism.cre, prism.dlg, oublek.dlg, ar4800.are, ar5400.bcs (or existing), ar4800.bcs (or existing)  adds: abgfEyeL.itm, abgfEyeR.itm


For Vanilla Sans ToTSC
AREA-NonToTSC-RestoreHiddenFAIContainerTWEAKS.tph
An optional patch for non ToTSC games to restore the hidden container with the ring of wizardry in the Friendly Arm Inn map as was found in the demo and ToTSC version of the game.


For ToTSC Only
SCRIPTS-ToTSC-BasicCorrections.tph
patch #1 Bone wardstone wasn't disabling the rune traps. Corrects this
modifies: trapdis.bcs

DIALOG-ToTSC-BasicCorrections.tph
patch #1 Replaces Alberts broken reward with the same reward as BG sans ToTSC -- NOTE: UB changes this to a different reward. further examination is required as to any potential issues.
modifies: albert.dlg
patch #2 General corrections to dialog files, mostly errant code and/or passable code which causes grief with editors like NearInfinity

CREATURES-ToTSC-BasicCorrections.tph
patch #1 Actually a small group of patches which correct the  scripting variable name
modifies: ~cultt1.cre~ ~cultt4.cre~ ~FEARM.cre~ ~PRIDEM.cre~
patch #2 Male guard no longer uses a female sound file
modifies: ~LEAGGU4.CRE~
patch #3 A selection of 'generic' farmers all with the same name.  There is a specific farmer with that name, however. The 'generic' farmers are renamed "Farmer"
modifies: ~FARM.CRE~ ~FARM3.CRE~ ~FARM4.CRE~ ~FARMER.CRE~
patch #4 Corrects the slot position of some Mage robes, moves them from the cloak slot to the armor/robe slot.
modifies: ANDRIS.CRE, MARCEL.CRE, SHANDAL2.CRE

ITEMS-ToTSC-BasicCorrections.tph
patch #1 Allows bards to use scimitars
modifies: ~sw1h20.itm~ ~sw1h22.itm~ ~sw1h23.itm~
patch #2 Corrects icon references.
modifies: ~brac11.itm~ ~misc65.itm~ ~misc67.itm~ ~misc68.itm~ ~misc1h.itm~ ~misc1b.itm~ ~misc70.itm~ ~misc71.itm~ ~misc75.itm~ ~misc77.itm~ ~misc1a.itm~ ~misc62.itm~ ~misc13.itm~ ~misc92.itm~ ~misc94.itm~ ~misc95.itm~
patch #3 Corrects speed on Bala's Axe
modifies: ax1h07.itm

AREA-ToTSC-BasicCorrections.tph
patch #1 Locks a door for consistency with the non-ToTSC version
modifies: ar0300.are
patch #2 Some adjustments to traps and container held items
modifies: ar0511.are

ISSUES-ToTSC-UlgothsResidentsHostileFix.tph
An issue with the resident's of Ulgoth's Beard going hostile when the cult attacks
modifies: cult3.cre, cult3.dlg

ISSUES-ToTSC-CountingHouseConflicts.tph
An issue where the one person calls the incorrect people in the area
modifies: ~crew1.cre~ ~crew2.cre~ ~crew3.cre~ ~crew4.cre~ ~crew5.cre~ ~crew6.cre~ ~crew7.cre~ ar0308.bcs, ar0307.bcs

ISSUES-ToTSC-Chapter5StartBehaviorTWEAKS.tph
An optional patch available for those who dislike the start of Chapter 5 in ToTSC and would like it reverted to non-ToTSC behavior of being triggered by passing over a floor trigger at the exits of the map.
modifies: ar1803.are, restores trigger script: endch4.bcs

testpatch.tph
commented entry for internal testing purposes.