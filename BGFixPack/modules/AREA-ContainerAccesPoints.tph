//AREA-ContainerAccesPoints.tph
PRINT ~Processing AREA-ContainerAccesPoints.tph~
SILENT
//container access points
ACTION_DEFINE_ARRAY arefile BEGIN ar2617 ar2630 ar2618 ar2643 ar2643 ar2643 ar2608 ar2609 ar2609 ar2609 ar2609 ar2611 ar2611 ar2612 ar2612 ar2612 ar2612 ar2614 ar2614 ar2302 ar2302 ar2302 ar2302 ar2302 ar2303 ar2303 ar2303 ar2303 ar2303 ar3201 ar3300 ar3300 ar3300 ar3300 ar3300 ar3300 ar3357 ar3303 ar3320 ar3321 ar3321 ar3332 ar3353 ar3353 ar3353 ar3353 ar3326 ar3314 ar3314 ar3314 ar4805 ar4002 ar4006 ar4008 ar4010 ar4012 ar4014 ar4101 ar1901 ar1802 ar1802 ar1802 ar1802 ar1802 ar0004 ar0004 ar0013 ar0013 ar0015 ar0015 ar0018 ar0018 ar0100 ar0100 ar0100 ar0100 ar0100 ar0100 ar0100 ar0100 ar0100 ar0100 ar0102 ar0102 ar0102 ar0102 ar0104 ar0105 ar0105 ar0108 ar0109 ar0110 ar0110 ar0110 ar0110 ar0114 ar0114 ar0114 ar0118 ar0118 ar0121 ar0135 ar0138 ar0160 ar0160 ar0161 ar0162 ar0170 ar0170 ar0170 ar0200 ar0200 ar0200 ar0200 ar0200 ar0300 ar0300 ar0300 ar0300 ar0300 ar0300 ar0300 ar0300 ar0300 ar0300 ar0303 ar0304 ar0304 ar0304 ar0304 ar0304 ar0307 ar0308 ar0308 ar0600 ar0603 ar0607 ar0611 ar0611 ar0611 ar0613 ar0614 ar0614 ar0614 ar0700 ar0705 ar0710 ar0710 ar0716 ar0716 ar0716 ar0719 ar0725 ar0800 ar0802 ar0802 ar0809 ar0809 ar0814 ar0814 ar1100 ar1101 ar1102 ar1102 ar1111 ar1112 ar1112 ar1117 ar1200 ar1200 ar1200 ar1200 ar1200 ar1201 ar1201 ar1204 ar1204 ar1207 ar1207 ar1207 ar1207 ar1208 ar1208 ar1208 ar1214 ar1214 ar1215 ar1300 ar1301 ar1301 ar1301 ar1301 ar1302 ar1302 ar1303 ar1303 ar1307 ar1307 ar1307 ar1307 ar1309 ar1309 ar1317 ar1317 ar1001 ar1003 ar1003 ar1003 ar1005 ar1005 ar1005 ar1006 ar1006 ar1006 ar1007 ar1007 ar1007 ar0512 ar0512 ar0512 ar0512 ar0512 ar0512 ar0512 END
ACTION_DEFINE_ARRAY oldXoff BEGIN    360    360    207    939   1475   1604   1569   1682    648    927   1335    995   1279    155    651    806   1531    905   1349   1055   1040    965    887   1321    236   1044   1043    754    434    522   3296   1825   3069    970   3879   3076    303    437    243    442    663    234    251    357    450    695    235    228    467    513    641    243    243    243    243    243    243   1120    156   2376   2078   1313   2288   2136    432    546    228    467    228    467    432    546   1906   3997   3842   2270   2275   3614    535    571    611    437    432    534    574   1597    649    112    436   1036    707    702    808    745    958    734   1197   1275    574    249    687    322    288    228    467    348    348    228    467    513    385   2019   2921   3232   4046   2028   1884   1789     68    347    527    588    393    402   1198    436    255    535    434    626    508    530    486    915   3556    300    878    191    118    287    699    288    370    766   2944    234    228    467    228    467    513    853    786   1745    228    467    378    789    228    467   3836    530    486    915    356    449    537    569   1286   1168   2181   3035    699    157    530    228    467    951   1108   1475   1604    971    735    640    228    467    715   1121   1310   1609    717   1019    193    575    725    667    387    274    353    577    228    467    228    467    348    257    378    789    228    467    513    228    467    513    228    467    513    691   1363    732    521    407    290   1985 END
ACTION_DEFINE_ARRAY oldYoff BEGIN    419    419    256    323    503    519   1460   1354    906   1062   1352   1341   1542    647   1024    183    791    250    872    849    337    286    225    532    622    851    344    382    473    202    873   1444   1523   1907   2587   3198    202    628    250    125    279    323    323    573    509    254    323    323     90    139    262    222    222    222    222    222    222    587    249   1460    837    620    382    251    133    216    323     90    323     90    133    216   3166   1686    967   1756   2206   1702   2137   2141   2145   2048   1356   1067   1102    189    596    215    142    502    662    855    779    825    683    517    263    737    221    128    574    237    332    323     90    695    695    323     90    139    862    687   2958   2383   2140   1853   2195   2413   3032   3029   2525   2445   1811   1738    963    356    322    376    267    200    197    754    768    352   3093    540    597    247    274    450    953    695    659    498    691    689    323     90    323     90    139    355    506   1510    323     90    272    305    323     90    356    754    768    352    692    508    379    164   1605   1657   1991   2337   2698    623    755    323     90    316    332    503    519    410    439    677    323     90    178   3326    382    522    978    947    428    432    440    724    243    328    533    376    323     90    323     90    695    318    272    305    323     90    139    323     60    139    323     60    139   1218   2130   1232   1086    998   1075   1456 END
ACTION_DEFINE_ARRAY newXoff BEGIN    NA     NA     208    937   1471   1603   1567   1679    656    928   1336    996   NA      154    652    832   1530    895   1343   1051   1045    964    879   1309     NA   1043   1042    752    431    520   3295   1823   3068    969   3878   3071    302    431    242    431    654    233     NA    355    447    687    234     NA    462    510    640    239    239    239    239    239    239     NA    161   2367   2077   1312   2287   2135    431    543    227    462     NA    462    431    543   1905   4000   3839   2272   2274   3613    527     NA    610     NA    431    527    572   1595    656     NA    435   1037    703    704    807    744    957    736   1196   1280     NA     NA    688    321    303     NA    462    347    347     NA    462    510    383   2015   2914   3231   4048   2032   1883   1792     63     NA    528     NA    400    401   1183    431    254    533    431    625    512    529     NA    911   3555    304    880    192    117    288    704    287    369     NA   2943    237     NA    462     NA    462    510    847    783   1743     NA    462    379    783     NA    462   3837    529    485    911     NA    447     NA    568   1279   1167   2174   3040    687    156     NA     NA    462    944   1107   1471   1608    976    734    637     NA    462    714   1119   1309   1608    720   1018    191    576    724    672    382    271    350    574     NA    462     NA    462    347    255    377    783     NA    462    510     NA    462    510     NA    462    510    687   1359     NA    528    416    305   1983 END
ACTION_DEFINE_ARRAY newYoff BEGIN    420    420    NA     324    506    528   1461     NA    905     NA   1356   1344   1548    648   1032    206    792    248     NA    852    348    288    232     NA    624    852    348    384    480    204    876   1446   1524   1908   2593   3204    204     NA    252    121    275    324    324    576    510    255    324    324     96     NA    264    221    221    221    221    221    221    588     NA   1462    840    624    383    252    134    217    324     96    324     96    134    219   3168     NA    968   1758   2208   1704     NA   2148   2148   2052   1368     NA   1105    192    600    228    144    504     NA     NA    780    828    684     NA    264    738    228    132     NA    240    299    324     96    696    696    324     96     NA    863    688   2964   2384   2139   1860   2196     NA   3035   3036     NA   2449   1815   1740    973    355    324    371    279    204    198    756    767    351   3096     NA     NA     NA    276    451    955    696    660    504     NA    700    324     96    324     96    140    358     NA     NA    324     96    276    307    324     96    360    756    767    353    696    509    384    168   1595   1658   1992   2340   2706    624    756    324     96    324    336    504    528     NA    444    671    324     96    180     NA    384    528    979    948    429    444    444     NA    244    329    540    384    324     96    326     96    697    319    276    302    324     96     NA    324     96     NA    324     96     NA   1220   2133   1236     NA   1000   1081   1457 END
OUTER_SET num_array = 224
OUTER_FOR (idx = 0; idx < %num_array%; idx += 1) BEGIN
 OUTER_SPRINT file $arefile("%idx%")
 OUTER_SET OXoff = $oldXoff("%idx%")
 OUTER_SET OYoff = $oldYoff("%idx%")
 ACTION_IF (IS_AN_INT $newXoff("%idx%") ) BEGIN
  OUTER_SET NXoff = $newXoff("%idx%")
 END ELSE BEGIN
  OUTER_SET NXoff = %OXoff%
 END
 ACTION_IF (IS_AN_INT $newYoff("%idx%") ) BEGIN
  OUTER_SET NYoff = $newYoff("%idx%")
 END ELSE BEGIN
  OUTER_SET NYoff = %OYoff%
 END
 ACTION_IF (FILE_EXISTS_IN_GAME ~%file%.are~) THEN BEGIN
  COPY_EXISTING ~%file%.are~ override
   READ_LONG 0x70 con_off
   READ_SHORT 0x74 con_cnt
   FOR (i = 0; i < con_cnt; i += 1) BEGIN
    READ_SHORT (i * 0xc0 + con_off + 0x20) xoff
    READ_SHORT (i * 0xc0 + con_off + 0x22) yoff
    PATCH_IF (xoff = %OXoff%) AND (yoff = %OYoff%) BEGIN //container trap point
     PATCH_IF (VARIABLE_IS_SET %NXoff%) AND (IS_AN_INT %NXoff%) BEGIN
      PATCH_LOG ~%file%.are -- replaced old X offset: %xoff% with new X offset: %NXoff%~
      WRITE_SHORT (i * 0xc0 + con_off + 0x20) %NXoff%
     END
     PATCH_IF (VARIABLE_IS_SET %NYoff%) AND (IS_AN_INT %NYoff%) BEGIN
      WRITE_SHORT (i * 0xc0 + con_off + 0x22) %NYoff%
      PATCH_LOG ~%file%.are -- replaced old Y offset: %yoff% with new Y offset: %NYoff%~
     END
    END
   END
  BUT_ONLY
 END
END
